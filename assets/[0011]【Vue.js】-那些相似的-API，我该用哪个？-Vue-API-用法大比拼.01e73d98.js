export default"\n\n## å‰è¨€\nVue.js çš„ API æ¯” React ç¨å¤šï¼ŒæŸäº› API çš„åŠŸèƒ½æœ‰é‡å çš„éƒ¨åˆ†ï¼Œåœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œå¤šå°‘ä¼šä»¤äººé€ æˆå›°æƒ‘ã€‚é—æ†¾çš„æ˜¯ï¼Œå„ç§æ–‡ç« ã€åšå®¢ç†å¯¹è¿™äº› API çš„ä»‹ç»ï¼Œéƒ½æ˜¯å•ç‹¬æŒ‘å‡ºæˆ–è€…æ³›æ³›è€Œè°ˆï¼ˆç‚¹ååæ§½ä»€ä¹ˆ Vue ä¼ å‚çš„ X ç§æ–¹å¼ï¼‰ã€‚æœ¬æ–‡å°†ä»å¯¹æ¯”çš„è§’åº¦å‡ºå‘ï¼Œåˆ†æè¿™äº›åŠŸèƒ½ç›¸ä¼¼çš„ API å„è‡ªé€‚åˆé‚£äº›ç‰¹å®šåœºæ™¯ã€‚  \nå¦‚æœè§‰å¾—æ–‡ç« å¤ªé•¿ï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ã€å°ç»“ã€‘éƒ¨åˆ†ã€‚\n\n## props vs $attrs\n\nåŒæ ·æ˜¯çˆ¶ç»„ä»¶ä¼ å…¥çš„å±æ€§ï¼ŒåŒºåˆ«åœ¨äºï¼š props ä¸­å£°æ˜çš„å±æ€§ä¼šè¢«å­ç»„ä»¶æ•è·ï¼Œå¹¶ä»£ç†åˆ°ç»„ä»¶å®ä¾‹ä¸Šï¼Œæœªè¢«æ•è·çš„å±æ€§ä¼šè¢«æ”¾å…¥ $attrs ä¸­\n\n```javascript\nexport default {\n\tprops: {\n\t\tuidï¼š Number,\n\t\tname: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Zhangsan'\t\n\t\t},\n\t}\n}\n```\n\n```javascript\n<personal-info :uid=\"1\" name=\"Xiaoming\" mobile=\"123456789\" />\n```\n\nprops æ•è·äº† `uid` `name` ï¼Œæ‰€ä»¥ç»„ä»¶å†…å¯ä»¥é€šè¿‡ `this.uid` `this.name` è®¿é—®ã€‚è€Œ `mobile` æ²¡æœ‰è¢«ç¿»ç‰Œï¼Œåªå¥½ä¹–ä¹–åœ°æ’è¿› `this.$attrs` é‡Œäº†ã€‚\n\nåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œéœ€è¦å£°æ˜ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `v-bind=\"$attrs\"` å°†å½“å‰ç»„ä»¶æœªæ•è·çš„å±æ€§é€ä¼ ï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ª button ç»„ä»¶ï¼š\n```javascript\n<template>\n\t<button v-bind=\"$attrs\" :disabled=\"loading\">\n\t\t<slot><slot>\n\t</button>\n</template>\n<script type=\"text/javascript\">\n\texport default {\n\t\tprops: {\n\t\t\tloading: Boolean // é™¤äº† loading å…¶ä½™çš„å±æ€§éƒ½è¢«æ‰“å…¥ $attrs ä¸­äº†\n\t\t}\n\t}\n<\/script>\n```\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªé™¤äº† `loading` ä»¥å¤–å…¶ä»–å±æ€§å’ŒåŸç”Ÿ button ä¸€æ ·çš„ç»„ä»¶ï¼š\n```javascript\n<my-button \n\tid=\"foo\" \n    class=\"btn normal\" \n    :style=\"buttonStyle\"\n    :loading=\"loading\"\n    @click=\"$alert('ä½ åœ¨æƒ³ğŸ‘')\">ç‚¹å‡»è·å¾— 100 å—</my-button>\n```\n\n## data vs computed\n\n`data` ç›´æ¥æ„æ€æ˜¯æ•°æ®ï¼Œç¡®åˆ‡åœ°è¯´æ˜¯ç»„ä»¶è‡ªèº«çš„**çŠ¶æ€**ï¼Œå¯ä»¥åœ¨ç»„ä»¶å†…è¿›è¡Œä¿®æ”¹ã€‚è€Œ `computed` èµ·åˆ°ä¸€ä¸ª**â€œå½’çº³â€** çš„ä½œç”¨ï¼Œç”¨æ¥åˆå¹¶å¤šä¸ªå“åº”å¼æ•°æ®ï¼Œæˆ–è€…å¯¹å“åº”å¼æ•°æ®åšä¸€äº›é€»è¾‘è®¡ç®—ï¼Œå‡å°‘æ¨¡æ¿è¡¨è¾¾å¼çš„é•¿åº¦ã€‚\n```javascript\n{\n\tprops: {\n\t\tgradeAverage: Number, // å¹´çº§å¹³å‡æˆç»©\n\t},\n\tdata () {\n\t\treturn {\n\t\t\tstudents: [\n\t\t\t\t{ name: 'xiaoming', score: 93 },\n\t\t\t\t{ name: 'xiaohong', score: 96 },\n\t\t\t\t{ name: 'zhang3', score: 77 },\n\t\t\t\t{ name: 'li4', score: 89 },\n\t\t\t\t{ name: 'wang5', score: 91 }\n\t\t\t]\n\t\t}\n\t},\n\tcomputed: {\n\t\t// è®¡ç®—å¹³å‡åˆ†\n\t\taverage() {\n\t\t\tconst headCount = this.students.length;\n\t\t\tif (!headCount) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tconst total = this.students.reduce((acc, student) => acc.score + student.score, 0);\n\t\t\treturn (total / headCount).toFixed(4)\n\t\t},\n\t\t// è®¡ç®—ä¸å¹´çº§å¹³å‡åˆ†å·®å€¼\n\t\tcompareToGrade() {\n\t\t\tconst delta = this.average - this.gradeAverage;\n\t\t\tconst result = delta > 0 ? 'é«˜äº' : 'ä½äº'\n\t\t\treturn `${result} å¹´çº§å¹³å‡ ${Math.abs(delta) åˆ†}`\n\t\t}\n\t}\n}\n```\n\nå¦‚æœ `computed` å±æ€§åŒæ—¶æä¾› `get / set` æ–¹æ³•ï¼Œè¿™ä¸ªå±æ€§ä¹Ÿèƒ½è¢«èµ‹å€¼:\n```javascript\n{\n\tdata () {\n\t\treturn {\n\t\t\tcash: 50\n\t\t}\t\n\t},\n\tcomputed: {\n\t\tyuan: {\n\t\t\tget() {\n\t\t\t\treturn `${this.cash} å…ƒ`\n\t\t\t},\n\t\t\t// v å‚æ•°å°±æ˜¯ç­‰å·å³è¾¹çš„å€¼\n\t\t\tset(v) {\n\t\t\t\tthis.cash = v\n\t\t\t}\n\t\t}\n\t}\n}\n```\næœ‰äº† `set` æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æ¥å¯¹ `yuan` è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œå¦‚ `yuan = 168` ï¼Œå°±èƒ½è§¦å‘ `yuan` çš„ `set` æ–¹æ³•ï¼Œ`168` ä¼šä½œä¸ºå‚æ•°ä¼ å…¥ã€‚\n\n## watch ä¸ computed\n\nå‘Šè¯‰ä½ ä»¬ä¸€ä¸ªç§˜å¯†ï¼šä¹‹æ‰€ä»¥æ”¾åœ¨ä¸€èµ·è¯´ï¼Œæ˜¯å› ä¸ºè¿™ä¸¤ä¸ª API æ˜¯å…„å¼Ÿå…³ç³»ï¼Œå®ƒä»¬åœ¨æºç ä¸­æœ‰ç›¸åŒçš„è€çˆ¹ â€”â€” `Watcher`ï¼Œä¸”çœ‹ï¼š\n```javascript\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tparams: {\n\t\t\t\tname: ''\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\t'params.name' (newVal) {\n\t\t\tif (newVal.length > 20) {\n\t\t\t\talert('åç§°ä¸å¾—è¶…è¿‡ 20 ä¸ªå­—');\n\t\t\t\tthis.params.name = newVal.slice(20);\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tinputName: {\n\t\t\tget() {\n\t\t\t\treturn this.params.name;\n\t\t\t},\n\t\t\tset(newVal) {\n\t\t\t\tif (newVal.length > 20) {\n\t\t\t\t\talert('åç§°ä¸å¾—è¶…è¿‡ 20 ä¸ªå­—');\n\t\t\t\t}\n\t\t\t\tthis.params.name = newVal.slice(0, 20);\n\t\t\t}\n\t\t}\n\t}\n}\n```\nå½“ vue å®ä¾‹ä¸­çš„ `params.name` æ”¹å˜ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ª watch å‡½æ•°æ‰§è¡Œï¼Œå½“å¯¹inputName è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œå¦‚ `this.inputName = 'xxx'`ï¼Œå°±ä¼šè§¦å‘ set å‡½æ•°æ‰§è¡Œã€‚\nä»è¯­ä¹‰ä¸Šæ¥è¯´ï¼š watch å¼ºè°ƒè¿‡ç¨‹ï¼Œå½“ä½ çš„æ•°æ®å˜æ›´æ—¶å¯ä»¥ç”¨ watcher å¤„ç†çš„å‰¯ä½œç”¨ã€‚computed å¼ºè°ƒçš„æ˜¯ç»“æœï¼Œä¸ç®¡ä½ ç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œåªè¦è¿”å›å€¼ç¬¦åˆä½ çš„é¢„æœŸå³å¯ã€‚\n\n## methods vs computed\n(ä¸‰è‹±æˆ˜ computed)  \n\ncomputed ä¸ method ä¸åŒçš„æ˜¯ï¼Œcomputed ä¼šæŠŠè®¡ç®—ç»“æœç¼“å­˜èµ·æ¥ï¼Œå½“å†…éƒ¨ä¾èµ–æ”¹å˜å¹¶ä¸”**ç›´åˆ°ä¸‹ä¸€æ¬¡è®¿é—®**æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ get å‡½æ•°ã€‚\næ¥çœ‹ä¾‹å­ï¼šä¸€ä¸ªä¸ªäººä¿¡æ¯è¡¨å•ç»„ä»¶ï¼Œåˆå§‹åŒ–æ—¶ä»æœåŠ¡ç«¯è·å–æ•°æ®ï¼Œç°åœ¨éœ€è¦åˆ¤æ–­ params çš„å†…å®¹æ¯”è¾ƒåˆå§‹æ•°æ®æ˜¯å¦æ”¹è¿‡ï¼Œä½¿ç”¨ `method` å’Œ `computed` ä¸¤ç§æ–¹æ³•å®ç°ï¼š\n```javascript\n{\n\tdata() {\n\t\treturn {\n\t\t\toldParams: null,\n\t\t\tparams: {\n\t\t\t\tname: '',\n\t\t\t\tage: '',\n\t\t\t}\n\t\t}\n\t},\n\tasync created () {\n\t\tconst info = await fetch('/user/info');\n\t\tObject.assign(this.params, info);\n\t\t// åŸç‰ˆæ•°æ®å› ä¸ºä¸éœ€è¦å“åº”å¼ï¼Œæ‰€ä»¥å°†å®ƒå†»ç»“èµ·æ¥\n\t\toldParams = Object.freeze(info);\n\t},\n\tmethods: {\n\t\thasChanged() {\n\t\t\tif (!this.oldParams) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\toldParams.name === params.name \n\t\t\t\t&& oldParams.age === params.age\n\t\t\t)\n\t\t},\n\t},\n\tcomputed: {\n\t\tcomputeChanged () {\n\t\t\tif (!this.oldParams) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\toldParams.name === params.name \n\t\t\t\t&& oldParams.age === params.age\n\t\t\t)\n\t\t}\n\t}\n}\n```\n\nä¸¤ç§æ–¹å¼çš„ä»£ç ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºæ‰§è¡Œæ—¶æœºï¼š æ¯æ¬¡è¿›è¡Œ `hasChanged()` è°ƒç”¨æ—¶ method æ–¹æ³•éƒ½ä¼šæ‰§è¡Œï¼Œè¿™ç‚¹æ²¡æœ‰ç–‘é—®ã€‚è€Œå¯¹äº `computeChanged`ï¼šå½“ `oldParams` ã€ `oldParams.name` ã€`oldParams.age` ã€`oldParams` ã€`oldParams` å…¶ä¸­ä»»ä½•ä¸€é¡¹æ”¹å˜ï¼Œ`computeChanged` ä¼šè¢«æ ‡è®°ä¸º `dirty` ï¼Œå†æ¬¡è®¿é—® `computeChanged`ï¼Œæ‰ä¼šé‡æ–°è°ƒç”¨è¿™ä¸ªæ±‚å€¼å‡½æ•°ï¼Œå†™æ®µä»£ç ï¼š\n```\nexport default {\n\tcreated() {\n\t\tthis.computeChanged // computed ç¬¬ä¸€æ¬¡è°ƒç”¨\n\t\tfor (let i = 0; i < 100; i++) {\n\t\t\tthis.computedChanged // ä¾èµ–é¡¹æ²¡æœ‰æ”¹å˜ï¼Œcomputed ä¸ä¼šå†æ¬¡è°ƒç”¨\n\t\t}\n\n\t\tthis.params.name = 'xxxx' // ä¾èµ–é¡¹æ”¹å˜ï¼Œ computed æ ‡è®°ä¸º dirty\n\n\t\tthis.computedChanged // ä¾èµ–é¡¹æ”¹å˜ä»¥åçš„æ±‚å€¼ï¼Œ computed æ›´æ–°è°ƒç”¨\n\t}\n}\n```\n\nä¸å¾—ä¸è¯´ computed å®ä¹ƒå“åº”å¼ API çš„ç²¾é«“ï¼Œå¦‚æœå¸Œæœ›ä½ çš„ template ä»£ç å˜è–„ï¼Œè¯·åŠ¡å¿…åˆ©ç”¨å¥½ computed ã€‚\n\n## methods vs filters\n\nç›¸å¯¹äº methodsï¼Œ filter æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š\n- filters åªèƒ½åœ¨ template ä¸­ä½¿ç”¨\n- filters ç›¸å½“äºç®¡é“æ“ä½œç¬¦ï¼ˆç†Ÿæ‚‰ shell çš„ç¨‹åºå‘˜éå¸¸å®¹æ˜“ç†è§£ï¼‰ï¼Œå¯ä»¥å°†è¾“å…¥æ•°æ®ä»å·¦å¾€å³ä¼ é€’\n- filters æ˜¯ä¸Šä¸‹æ–‡æ— å…³çš„ï¼Œæ— æ³•åœ¨å†…éƒ¨è®¿é—® this\n- filters æ”¯æŒå…¨å±€æ³¨å…¥ï¼Œæ³¨å…¥ä»¥åæ— éœ€ import ä»£ç å°±èƒ½åœ¨æ¯ä¸ªå®ä¾‹å¼•ç”¨\n\nå½“ä½ çš„ value éœ€è¦å¤šä¸ªå‡½æ•°è½¬æ¢æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°åµŒå¥—ç°è±¡ï¼š\n```javascript\n<span>ä»·æ ¼ {{ method1(method2(value || 0)) }}</span>\n```\n\nfilters å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ï¼š\n```javascript\n<span>å¹´é¾„ï¼š {{ value | filter1 | filter2 }}</span>\n```\n\n## watch ä¸ $watch\n\nä¸Šæ–‡ä¸­çš„ `watch` ç›‘å¬æ˜¯å£°æ˜å¼çš„é€‰é¡¹ï¼Œè·Ÿéšç»„ä»¶åˆ›å»ºå’Œé”€æ¯ã€‚å¦‚æœä½ éœ€è¦éšæ—¶æ’¤é”€ç›‘å¬æ“ä½œï¼Œå¯ä»¥è°ƒç”¨ç»„ä»¶å®ä¾‹ä¸Šçš„ `$watch` ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ’¤é”€å‡½æ•°ï¼Œè°ƒç”¨å³æ’¤é”€ï¼š\n\n```javascript\nexport default {\n\tdata() {\n\t\treturn: {\n\t\t\tparams: {\n\t\t\t\tname: '',\n\t\t\t},\n\t\t\tcancel: null\n\t\t}\n\t},\n\tmethods: {\n\t\tstartWatching() {\n\t\t\t// å°†å–æ¶ˆå‡½æ•°èµ‹ç»™ data\n\t\t\tthis.cancel = this.$watch('params.name', ()=>{\n\t\t\t\t// do sth\n\t\t\t})\n\t\t},\n\t\tstopWatching() {\n\t\t\tif (!this.cancel) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.cancel();\n\t\t}\n\t}\n}\n```\n\nå¦å¤–ï¼Œ`$watch` çš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¯æŒä¼ å…¥å‡½æ•°ï¼Œä»¥ä¾¿å®ç°æ›´å¤æ‚çš„è§¦å‘æ¡ä»¶ï¼Œæ¯”å¦‚ï¼š\n```javascript\nthis.$watch(\n\t// è§¦å‘æ¡ä»¶\n\t()=> {\n    \tconst { name } = this.params;\n        if (!name) {\n        \treturn 'åç§°ä¸èƒ½ä¸ºç©º'\n        }\n        if (name.length > 20) {\n        \treturn 'åç§°ä¸èƒ½è¶…è¿‡ 20 ä¸ªå­—'\n        }\n    },\n    // è§¦å‘å›è°ƒ\n    (message) => {\n    \tif (message) {\n        \talert(message)\n        }\n    },\n    // å»¶è¿Ÿæ‰§è¡Œ\n    {\n    \timmediate: false\n    }\n)\n```\n\n## v-model vs .sync\n\näºŒè€…éƒ½æ˜¯æ¨¡æ¿çš„è¯­æ³•ç³–ï¼Œå…¶ä¸­ v-model å°±æ˜¯å„è·¯æ–‡ç« é¼“å¹çš„â€œåŒå‘ç»‘å®šâ€ï¼Œå…¶å®æ²¡é‚£ä¹ˆç„ä¹ï¼Œvue åœ¨æ¨¡æ¿ç¼–è¯‘æœŸä¼šæŠŠè¿™ä¸ªæŒ‡ä»¤æ‹†æˆ value å’Œ changeï¼ˆæˆ–è€… inputï¼‰ äº‹ä»¶ç½¢äº†ã€‚ç”±äºå•å‘æ•°æ®æµçš„å…³ç³»ï¼Œå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹ props ï¼Œéœ€è¦é€šè¿‡å‘é€äº‹ä»¶å®ç°ï¼Œè€Œ v-model / .sync åœ¨æ¨¡æ¿å±‚é¢å¸®ä½ åšäº†è¿™å±‚å°è£…ï¼š\n\n### v-model\n\nv-model ä¸€èˆ¬ç”¨äºåŸç”Ÿçš„ input ã€ checkbox ã€ select è¡¨å•ä½œä¸ºâ€œåŒå‘ç»‘å®šâ€æŒ‡ä»¤ï¼Œå½“æ™®é€šç»„ä»¶å¼•ç”¨ä¸­å‡ºç° v-model æŒ‡ä»¤ï¼Œä¼šè‡ªåŠ¨æ¨å¯¼ä¸º `:value` å’Œ `@change`ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¦‚æœåœ¨ç»„ä»¶å†…éƒ¨æ‹¼å‡‘å‡º `value` å±æ€§å’Œ `change` äº‹ä»¶ï¼Œä¹Ÿå¯ä»¥å®Œæˆâ€œåŒå‘ç»‘å®šâ€æ•ˆæœï¼š\n\n```javascript\n<template>\n\t<div>\n\t\t\x3c!-- æ‹¼å‡‘ value --\x3e\n\t\t<span>{{value}}</span>\n\t\t\x3c!-- æ‹¼å‡‘ @change --\x3e\n\t\t<button @click=\"$emit('change', value + 1)\">+</button>\n\t\t<button @click=\"$emit('change', value - 1)\">-</button>\n\t</div>\n</template>\n\n<script type=\"text/javascript\">\nexport default {\n\tprops: {\n\t\tvalue: Number\n\t}\n}\n<\/script>\n```\n\nå¤–å±‚å¼•ç”¨ç»„ä»¶æ—¶ï¼Œä¼ å…¥ v-model ï¼Œå°±å¯ä»¥åƒæ™®é€šè¾“å…¥æ¡†ä¸€æ ·ä½¿ç”¨äº†ï¼\n```javascript\n<my-counter v-model=\"myCount\" />\n```\nç­‰ä»·äºï¼š\n```javascript\n<my-counter :value=\"myCount\" @change=\"v => myCount = v\" />\n```\n\nåœ¨ 2.2.0+ ç‰ˆæœ¬ï¼Œvue æ”¯æŒæŒ‡å®š model é€‰é¡¹ï¼Œè‡ªå®šä¹‰å­—æ®µåå’Œ event äº‹ä»¶åï¼š\n\n```javascript\n<template>\n\t<div>\n\t\t\x3c!-- è‡ªå®šä¹‰å±æ€§ count --\x3e\n\t\t<span>{{count}}</span>\n\t\t\x3c!-- è‡ªå®šä¹‰äº‹ä»¶ setCount --\x3e\n\t\t<button @click=\"$emit('setCount', value + 1)\">+</button>\n\t\t<button @click=\"$emit('setCount', value - 1)\">-</button>\n\t</div>\n</template>\nexport default {\n\tmodel: {\n\t\tprop: 'count',\n\t\tevent: 'setCount'\n\t},\n\tprops: {\n\t\tcount: Number\n\t}\n}\n```\n\næ³¨æ„ï¼Œä¸€ä¸ªç»„ä»¶åªèƒ½å®šä¹‰ä¸€ä¸ª modelï¼Œå¦‚æœå¸Œæœ›å®šä¹‰å¤šä¸ªï¼Œè¯·çœ‹ä¸‹æ–‡çš„ `.sync` ä¿®é¥°ç¬¦ï¼š\n\n### .sync\nåŒæ­¥å±æ€§å±æ€§ä¿®é¥°ç¬¦ï¼Œé€šè¿‡çº¦å®šçš„äº‹ä»¶æ ¼å¼ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶åŒæ­¥æ›´æ–°ï¼ŒåŸç†è·Ÿ v-model ç›¸ä¼¼ã€‚ä¸åŒçš„æ˜¯ï¼Œäº‹ä»¶åç§°è¦éµå¾ª `update:å±æ€§` æ ¼å¼ï¼š\n\n```javascript\n<template>\n\t<div>\n\t\t<span>{{count}}</span>\n\t\t<button @click=\"$emit('update:count', count + 1)\">+</button>\n\t\t<button @click=\"$emit('update:count', count - 1)\">-</button>\n\t</div>\n</template>\n\n<script type=\"text/javascript\">\nexport default {\n\tprops: {\n\t\tcount: Number\n\t}\n}\n<\/script>\n```\nå¤–å±‚ä½¿ç”¨ï¼š\n```javascript\n<my-counter :count.sync=\"myCount\" />\n```\nç­‰ä»·äºï¼š\n```javascript\n<my-counter :count=\"myCount\" @update:count=\"c => myCount = c\" />\n```\nä¸ v-model ä¸åŒï¼Œ.sync å¯ä»¥ä¿®é¥°å¤šä¸ªå±æ€§\n\n## render vs template\n\næˆ‘ä»¬å¹³æ—¶ç¼–å†™çš„ template å¹¶ä¸ä¼šé©¬ä¸Šè½¬åŒ–ä¸ºè™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼Œè€Œæ˜¯å…ˆç¼–è¯‘æˆ render å‡½æ•°ã€‚ä¸”çœ‹å®˜æ–¹æ–‡æ¡£ä¸­ `render` å‡½æ•°çš„å¼•å­ï¼š\n\n> Vue æ¨èåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨æ¨¡æ¿æ¥åˆ›å»ºä½ çš„ HTMLã€‚ç„¶è€Œåœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œä½ çœŸçš„éœ€è¦ JavaScript çš„å®Œå…¨ç¼–ç¨‹çš„èƒ½åŠ›ã€‚è¿™æ—¶ä½ å¯ä»¥ç”¨æ¸²æŸ“å‡½æ•°ï¼Œå®ƒæ¯”æ¨¡æ¿æ›´æ¥è¿‘ç¼–è¯‘å™¨ã€‚\n\nè¯´å¾—å†ç›´ç™½ä¸€ç‚¹ï¼šrender å‡½æ•°æ˜¯çœŸæ­£åˆ›å»ºè™šæ‹Ÿ DOM çš„å‡½æ•°ï¼š\n```javascript\nexport default {\n\trender (createElement) {\n\t\tconst { msg } = this;\n\t\treturn createElement('h3', { style: { color: '#66ccff' } }, `Hello ${msg}`)\n\t}\n}\n```\næœ€ç»ˆç”Ÿæˆï¼š\n> ### <font color=\"\">Hello World</font>\n\nä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœæä¾›è¿™ä¹ˆä¸€ä¸ª `template` æ¨¡æ¿ï¼š\n```javascript\n<div><span>{{ msg }}</span></div>\n```\nç»è¿‡ Vue çš„ç¼–è¯‘ï¼Œå®ƒå°†å˜æˆï¼š\n```javascript\nfunction () {\n\twith(this){\n\t\treturn createElement(\n\t\t\t'div',\n\t\t\t[\n\t\t\t\tcreateElement('span', [ createTextVNode( toString(msg) ) ])\n\t\t\t]\n\t\t)\n\t}\n}\n```\nå¦‚æ–‡æ¡£æ‰€è¨€ï¼Œæ¨¡æ¿å¯ä»¥æ›´ç›´è§‚åœ°æ˜ å°„ HTML ï¼Œä½†æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œç›´æ¥ä½¿ç”¨ `render` å‡½æ•°ä¼šæ¯”æ¨¡æ¿æ›´çµæ´»ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­ä»‹ç»äº†ä¸€ç§åŠ¨æ€æ ‡é¢˜çš„ç¤ºä¾‹ï¼Œæ ¹æ® `level` å±æ€§å†³å®šæ¸²æŸ“ `h1` ~ `h6` æ ‡ç­¾ï¼Œä½¿ç”¨ `render` å‡½æ•°å¯ä»¥è¿™ä¹ˆå†™ï¼š\n```javascript\nexport default {\n\tname: 'my-title'\n\tprops: {\n\t\tlevel: {\n\t\t\ttype: Number\n\t\t},\n\t},\n\trender(createElement) {\n\t\t// è·å–ä¼ å…¥çš„å±æ€§ã€å’Œæ’æ§½ï¼ˆå­æ¨¡æ¿ï¼‰\n\t\tconst { $attrs, level, $slot } = this;\n\t\tconst children = $slot.default;\n\t\t// æ ‡ç­¾åç§° h1 ~ h6\n\t\tconst tag = `h${level}`; \n\t\treturn createElement(tag, $attrs, children)\n\t}\n}\n```\nä½¿ç”¨ï¼š \n```javascript\n<my-title :level=\"1\" style=\"color:#333\">è¿™æ˜¯ h1</my-title>\n<my-title :level=\"2\" style=\"color:#666\">è¿™æ˜¯ h2</my-title>\n<my-title :level=\"3\" style=\"color:#999\">è¿™æ˜¯ h3</my-title>\n```\n\nè¯•æƒ³ä¸€ä¸‹ï¼šå¦‚æœæˆ‘ä»¬ä½¿ç”¨ `template` è¯­æ³•æ¥å®ç°çš„è¯å°±è¦å£°æ˜6ä¸ª `v-if` æ¨¡æ¿ï¼Œéå¸¸å•°å—¦ã€‚ä¸è¿‡ render å‡½æ•°ä¹Ÿæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼šä½¿ç”¨ render å‡½æ•°æ— æ³•ä½¿ç”¨ `v-model` è¿™ä¸ªæ¨¡æ¿ä¸“å±çš„è¯­æ³•ç³–ï¼ŒåŒæ—¶ä¹Ÿå¤±å»äº†é™æ€æ¨¡æ¿ä¼˜åŒ–çš„å¯èƒ½æ€§ï¼ˆæœ‰å¾—å¿…æœ‰å¤±ï¼‰ã€‚\n\nä¹Ÿè®¸ä½ å·²ç»å‘ç°ï¼š `createElement` çš„æ€è·¯ä¸ `React.createElement` ä¸€è„‰ç›¸æ‰¿ã€‚æ—¢ç„¶å¯ä»¥é€šè¿‡ JSX ç¼–å†™ ReactElement ï¼Œèƒ½å¦ä½¿ç”¨ JSX ç¼–å†™ render å‡½æ•°å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼šæ ¹æ®å®˜æ–¹æ–‡æ¡£ä»‹ç»ï¼Œé€šè¿‡è¿™ä¸ª [Babel æ’ä»¶](https://github.com/vuejs/jsx)ï¼Œå°±èƒ½åœ¨ Vue æ–‡ä»¶ä¸­æ„‰å¿«åœ°ä½¿ç”¨JSXäº†ï¼Œè¯¦æƒ…ç§»æ­¥[å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/v2/guide/render-function.html#JSX)\n\n## functional vs stateful\n\n\nå‡å¦‚ä½ çš„ç»„ä»¶æœ¬èº«ä¸éœ€è¦å“åº”å¼æ•°æ®ï¼Œæ‰€æœ‰çš„è¡Œä¸ºéƒ½å—æ§çˆ¶ç»„ä»¶çš„è¾“å…¥ï¼Œä¸å¦¨å¯¹è¿™ä¸ªç»„ä»¶æ·»åŠ  `functional` å±æ€§ï¼š\n\n```javascript\nexport default {\n\t// æ ‡è®°ä¸ºå‡½æ•°å¼\n\tfunctional: true,\n\tname: 'my-button',\n\tprops: {\n\t\ttype: String,\n\t\tstyle: [Object, String]\n\t},\n\trender (h, context) {\n\n\t\tconsole.log(this); // å‡½æ•°å¼ç»„ä»¶æ²¡æœ‰ thisï¼Œä¸º undefined\n\t\t// å‡½æ•°å¼ç»„ä»¶çš„ä¸Šä¸‹æ–‡ context\n\t\t// æ³¨æ„å› ä¸ºæ²¡æœ‰ this æ‰€ä»¥ä¸Šä¸‹æ–‡å±æ€§å°±ä¸èƒ½å«åšå®ä¾‹å±æ€§äº†ï¼Œåç§°å¼€å¤´ä¸å¸¦ $\n\t\tconst { props, slot, listeners } = context; \n\t\tconst { type = 'info', style } = props;\n\t\t// æ ¹æ® type å†³å®šèƒŒæ™¯é¢œè‰²\n\t\tconst backgroundColor = {\n\t\t\tdanger: 'red',\n\t\t\tsuccess: 'green',\n\t\t\tinfo: 'blue',\n\t\t\tdisabled: 'gray'\n\t\t}[type];\n\n\t\treturn h(\n\t\t\t'button', \n\t\t\t{\n\t\t\t\t'class': 'my-btn',\n\t\t\t\tstyle: {\n\t\t\t\t\tcolor: 'white',\n\t\t\t\t\toutline: 'none',\n\t\t\t\t\tbackgroundColor,\n\t\t\t\t\t...style,\n\t\t\t\t},\n\t\t\t\ton: listeners\n\t\t\t},\n\t\t\tslot.default\n\t\t)\n\t}\n\n}\n```\n\nä¸Šé¢çš„ä»£ç æ˜¯ä¸ºäº†å®ç°ä¸€ä¸ªç®€å•çš„æ ·å¼ button ï¼Œ å› ä¸ºæ·»åŠ äº† `functional: true` å±æ€§ï¼Œè¿™ä¸ªç»„ä»¶å°±å˜æˆäº†ä¸€ä¸ª**å‡½æ•°å¼ç»„ä»¶**ï¼Œä¸æ™®é€šçš„ç»„ä»¶ï¼ˆæˆ‘ç§°ä¹‹ä¸º **stateful ç»„ä»¶**ï¼‰ä¸åŒï¼Œå®ƒæ˜¯æ— çŠ¶æ€çš„ï¼Œä¸èƒ½è®¿é—® this ï¼Œéœ€è¦å€ŸåŠ© `context` å¯¹è±¡ï¼ŒåŒæ—¶ `data` ã€ `computed` ã€ `watch` ç­‰å“åº”å¼ API æ— æ³•ä½¿ç”¨ï¼ˆåªèƒ½å“åº”çˆ¶ç»„ä»¶çš„ï¼‰ã€‚ä½†æ˜¯å®ƒæ›´ä¸ºè½»é‡ï¼Œæ¯” stateful ç»„ä»¶åˆ›å»ºå‡å°‘äº†ä¸å¿…è¦çš„å¼€é”€ã€‚\n\nå¦å¤–ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å‡½æ•°å¼æ¨¡æ¿ï¼Œåœ¨ template æ ‡ç­¾ä¸­æ·»åŠ  `functional` å±æ€§å³å¯ï¼Œè¿™é‡Œåˆå·æ‡’ç›´æ¥ç”¨å®˜æ–¹ç¤ºä¾‹ï¼š\n```javascript\n<template functional>\n\t<button class=\"my-button\" v-bind=\"data.attrs\" v-on=\"listeners\">\n\t\t<slot></slot>\n\t</button>\n</template>\n```\næ­£å¸¸ç»„ä»¶ template è¢«åŒ…è£¹åœ¨ `this` ä¸­ï¼Œè€Œå‡½æ•°å¼ç»„ä»¶å°±è¢«åŒ…è£¹ä¸º `context` ä¸­ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨ `context` ä¸Šçš„å±æ€§ã€‚\n\n## $set vs assignment èµ‹å€¼\n```javascript\nexport default {\n\tdata () {\n\t\tparams: {\n\t\t\tname: ''\n\t\t}\n\t},\n\tmethods: {\n\t\tsetAge (age) {\n\n\t\t\tif (!age) {\n\t\t\t\tdelete this.params.age;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.params.age = age;\n\t\t}\n\t}\n}\n```\n\nç”±äº `Object.defineProperty` çš„å±€é™ï¼Œç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œæ·»åŠ /åˆ é™¤å±æ€§æ“ä½œæ˜¯æ— æ³•è¢«ç›‘å¬çš„ï¼Œéœ€è¦æ¢æˆ `vm.$set` å’Œ `vm.$delete`ï¼š\n```javascript\nsetAge(age) {\n\tif (!age) {\n\t\tthis.$delete(this.params, 'age');\n\t\treturn;\n\t}\n\tthis.$set(this.params, 'age', age);\n}\n```\n\n## å°ç»“\n\n- `props` ä¸­å£°æ˜çš„å±æ€§ä¼šè¢«æ•è·å¹¶æŒ‚åœ¨ç»„ä»¶å®ä¾‹ä¸Šï¼Œå¦åˆ™ä¼šæŒ‚è¿› `$attrs` ä¸­\n- ä½¿ç”¨ `v-bind=\"$attrs\"` å¯ä»¥å®ç°å±æ€§é€ä¼ \n- `data` å¯ä»¥ç†è§£ä¸ºç»„ä»¶ä¸­çš„å“åº”å¼çŠ¶æ€\n- `watch` ä¸ `computed` éƒ½æ˜¯ `Watcher` çš„å®ä¾‹ã€‚ `watch` æ³¨é‡è¿‡ç¨‹å’Œå‰¯ä½œç”¨ï¼Œ`computed` æ³¨é‡ç»“æœ\n- `computed` å…·æœ‰ç¼“å­˜å“åº”å¼ä¾èµ–çš„æ•ˆæœ\n- `filters` å¯ä»¥ç†è§£ä¸ºæ¨¡æ¿çš„ç®¡é“æ“ä½œç¬¦ï¼Œä¸ä¸Šä¸‹æ–‡ï¼ˆç»„ä»¶å®ä¾‹ï¼‰æ— å…³\n- `$watch` æ˜¯æŒ‚åœ¨ç»„ä»¶å®ä¾‹ä¸Šçš„æ–¹æ³•ï¼Œå¯ä»¥éšæ—¶è°ƒç”¨å’Œæ’¤é”€ï¼Œæ”¯æŒå¤æ‚çš„è§¦å‘æ¡ä»¶\n- `v-model` æ˜¯ `value` ä¸` @change` çš„åˆä½“ï¼Œç»„ä»¶ä¸­å”¯ä¸€\n- `.sync` æ˜¯çº¦å®šåŒ–çš„çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Œç»„ä»¶ä¸­å¯ä»¥å®šä¹‰å¤šä¸ª\n- `render` æ˜¯çœŸæ­£ç”Ÿæˆè™šæ‹Ÿ DOM çš„æ–¹æ³•ï¼Œ`template` æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆ `render` å‡½æ•°ã€‚ç›´æ¥ä½¿ç”¨ `render` å‡½æ•°å¯ä»¥æ›´çµæ´»åœ°å¤„ç†ç»„ä»¶è¡¨ç°é€»è¾‘ã€‚\n- `functional` æ˜¯æ— çŠ¶æ€çš„ç»„ä»¶\n- å¦‚æœéœ€è¦å¯¹å“åº”å¼æ•°æ®æ·»åŠ /åˆ é™¤å±æ€§ï¼Œéœ€è¦å€ŸåŠ© `$set/$delete` æ–¹æ³•ã€‚\n";
